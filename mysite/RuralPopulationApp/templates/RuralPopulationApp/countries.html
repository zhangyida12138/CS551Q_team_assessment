{% extends 'index.html' %}

{% block title %}
    Countries
{% endblock %}

{% block content %}
    <h1>List of Countries with yearly Rural population</h1>
    <br>
    <table class="table table-striped">
        <thead class="thead-dark">
    <tr>
        <th >Country Code</th>
        <th >Country Name</th>
        <th >Income Group</th>
        <th >Region</th>
        <th >Special Notes</th>
        <th >operate</th>
    </tr>
  </thead>
        <tbody>
        {% for country in countries %}
            <li>{{ country.name }} - {{ country.country_code }} |Income Group: {{ country.income_group.name }}|Region: {{country.region.name}} </li>
            <li>Special Notes: {{ country.special_notes }}</li>
            <h4>Rural population (% of total population) per year:</h4>
            <ul>
                {% for data_entry in country.dataentry_set.all %}
                    <li>Year: {{ data_entry.year }}, Population(%): {{ data_entry.value }}</li>
                {% empty %}
                    <li>No data entries found for this country.</li>
                {% endfor %}
            </ul>
        <tr>
            <td>{{ country.country_code }}</td>
            <td>{{ country.name }}</td>
            {% if country.income_group.name == 'nan' %}
                <td>None</td>
            {% else %}
                <td>{{ country.region.name}}</td>
            {% endif %}
            {% if country.income_group.name == 'nan' %}
                <td>None</td>
            {% else %}
                <td>{{country.region.name}}</td>
            {% endif %}
            {% if country.special_notes == 'nan' %}
                <td>None</td>
            {% else %}
                <td>{{ country.special_notes }}</td>
            {% endif %}
            <td><button type="button" class="btn btn-outline-info">details</button></td>
        </tr>
        {% endfor %}
  </tbody>
    </table>
      
{% endblock %}